<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chinasofti.ssm01.dao.UserInfoDao">
	
	<!-- <insert id="addFileInfo" parameterType="FileInfo">
		insert into file_info(file_name,file_url) values(#{fileName},#{fileUrl})
	</insert> -->
	
	<resultMap type="UserInfo" id="usermap">
		<id column="user_id" property="userId"/>
		<result column="user_name" property="userName"/>
		<result column="user_account" property="userAccount"/>
		<result column="user_sex" property="userSex"/>
		<result column="user_password" property="userPassword"/>
		<result column="user_face_url" property="userFaceUrl"/>
		<result column="user_face_path" property="userFacePath"/>
	</resultMap>
	
	<select id="getUserInfoList" parameterType="UserInfo" resultMap="usermap">
		select * from user_info
		<where>
			<if test="userId != null and userId != 0">
				and user_id like #{userId}
			</if>
			<if test="userAccount != null and userAccount != ''">
				and user_account like #{userAccount}
			</if>
			<if test="userName != null and userName !=''">
				and user_name like #{userName}
			</if>
			<if test="userSex != null and userSex !=''">
				and user_sex like #{userSex} 
			</if>
		</where>
		limit #{start},#{length}
	</select>
	
	<select id="getAllUserInfos" resultMap="usermap">
		select * from user_info
	</select>
	
	<select id="getUserInfoListCount" parameterType="UserInfo" resultType="Long">
		select count(*) from user_info
		<where>
			<if test="userId != null and userId != 0">
				and user_id like #{userId}
			</if>
			<if test="userAccount != null and userAccount != ''">
				and user_account like #{userAccount}
			</if>
			<if test="userName != null and userName !=''">
				and user_name like #{userName}
			</if>
			<if test="userSex != null and userSex !=''">
				and user_sex like #{userSex}
			</if>
		</where>
	</select>
	
	<select id="getUserInfoByIdAndAccountAndPassword" parameterType="UserInfo" resultMap="usermap">
		select * from user_info
		<where>
			<if test="userId != null and userId != 0">
				and user_id = #{userId}
			</if>
			<if test="userAccount != null and userAccount != ''">
				and user_account = #{userAccount}
			</if>
			<if test="userPassword != null and userPassword !=''">
				and user_password = #{userPassword}
			</if>
		</where>
	</select>
	
	<update id="updateUserInfo" parameterType="UserInfo">
		update user_info set user_account = #{userAccount},
		user_password = #{userPassword},
		user_name = #{userName},
		user_sex = #{userSex},
		user_face_url = #{userFaceUrl},
		user_face_path = #{userFacePath}
		where user_id = #{userId}
	</update>
	<delete id="deleteUserInfo" parameterType="UserInfo">
		delete from user_info where user_id = #{userId}
	</delete>
</mapper>